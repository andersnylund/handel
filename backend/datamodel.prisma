type User {
  id: UUID! @id(strategy: AUTO)
  sub: String! @unique
  email: String! @unique
  emailVerified: Boolean! @default(value: false)
  items: [Item]!
  participations: [Participant]!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Item {
  id: UUID! @id(strategy: AUTO)
  title: String!
  description: String!
  price: Int!
  image: String!
  largeImage: String!
  user: User
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Deal {
  id: UUID! @id(strategy: AUTO)
  participants: [Participant] @relation(name: "DealParticipant")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Participant {
  id: UUID! @id(strategy: AUTO)
  deal: Deal @relation(name: "DealParticipant")
  user: User
  item: Item
  approval: DealApproval
  lastSeen: DateTime!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

enum DealApproval {
  ACCEPT
  REJECT
  UNACKNOWLEDGED
}
